"use strict";var slide_hero=new Swiper(".slide-principal",{effect:"fade",autoplay:{delay:5e3,disableOnInteraction:!1}}),slide_plans=new Swiper(".slide-plans",{slidesPerView:3,spaceBetween:10,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},grabCursor:!0,breakpoints:{320:{slidesPerView:1,spaceBetween:10},480:{slidesPerView:1,spaceBetween:10},640:{slidesPerView:3,spaceBetween:10}}}),openModalBtns=document.querySelectorAll("#open-modal"),closeModalBtn=document.querySelector("#close-modal"),modal=document.getElementById("modal");function init(){handleCardPlanClicks(),handleFormNavigation(),fillFormWithPlanData(getPlanFromURL()),populateFormWithSavedData(),handleFormSubmits()}function handleCardPlanClicks(){document.querySelectorAll(".card-plan").forEach(function(t){t.addEventListener("click",function(e){e.preventDefault();e=t.getAttribute("data-plan");window.location.href="form.html?plan=".concat(e)})})}function getPlanFromURL(){return new URLSearchParams(window.location.search).get("plan")}function fillFormWithPlanData(e){"fibra-300"===e?setPlanDetails("Fibra 300","R$ 99,90","300"):"fibra-600"===e?setPlanDetails("Fibra 600","R$ 109,90","600"):"combo-300"===e&&setPlanDetails("Combo 300","R$ 139,90","300"),localStorage.setItem("plan",e)}function setPlanDetails(e,t,n){document.querySelector("#plan-name").innerText=e,document.querySelector("#plan-price").innerText=t,document.querySelector("#plan-velocity").innerText=n}function handleFormNavigation(){var e=document.querySelectorAll(".next-button"),t=document.querySelectorAll(".previous-button");e.forEach(function(e){e.addEventListener("click",function(){changeStep(getCurrentStep(e)+1)})}),t.forEach(function(e){e.addEventListener("click",function(){changeStep(getCurrentStep(e)-1)})})}function getCurrentStep(e){return parseInt(e.closest(".step-form").id.split("-")[1])}function changeStep(t){var e=document.querySelectorAll(".step"),n=document.querySelectorAll(".step-form");e.forEach(function(e){e.classList.toggle("active",parseInt(e.dataset.step)===t)}),n.forEach(function(e){e.classList.toggle("active",parseInt(e.id.split("-")[1])===t)})}function populateFormWithSavedData(){["name","email","phone","phone2","cpf","rg","birth","street","number","complement","neighborhood","city","state","zipcode","reference","payment-method","due-date"].forEach(function(e){var t=localStorage.getItem(e);t&&(document.getElementById(e).value=t)})}function handleFormSubmits(){showSuccessModal(),document.querySelectorAll(".step-form").forEach(function(t){t.addEventListener("submit",function(e){e.preventDefault(),saveFormDataToLocalStorage(),t.querySelector(".submit-button")&&handleSubmit(t)})})}function saveFormDataToLocalStorage(){document.querySelectorAll(".step-form").forEach(function(e){new FormData(e).forEach(function(e,t){localStorage.setItem(t,e)})})}function handleSubmit(e){var t=document.querySelectorAll(".step-form"),n=new FormData;t.forEach(function(e){new FormData(e).forEach(function(e,t){n.append(t,e)})});t=localStorage.getItem("plan");t&&n.append("plan",t);t=Object.fromEntries(n.entries());console.log("JSON gerado:",JSON.stringify(t)),fetch("https://your-api-endpoint.com",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){e.ok?(alert("Dados enviados com sucesso!"),showSuccessModal(),localStorage.clear()):alert("Ocorreu um erro ao enviar os dados.")}).catch(function(e){alert("Erro ao enviar os dados: "+e.message)})}function showSuccessModal(){var t=document.getElementById("success-modal");t.style.display="block",document.querySelector(".close-modal").addEventListener("click",function(){t.style.display="none"}),window.addEventListener("click",function(e){e.target===t&&(t.style.display="none")})}openModalBtns.forEach(function(e){e.addEventListener("click",function(){modal.style.display="flex"})}),closeModalBtn.addEventListener("click",function(){modal.style.display="none"}),window.addEventListener("click",function(e){e.target==modal&&(modal.style.display="none")}),document.addEventListener("DOMContentLoaded",init);